# wasm 版 web 编辑器梳理

## 整体架构

外围控件平台独立 UI + 核心编辑区域 WASM

- 模块

```
- 顶部header区域
- 左侧map-list区域
- 右侧panel区域
- 中间map域
```

- 区域功能

```
顶部区域
  - title地图功能操作区域（2d ）
    - 撤销
    - 重做
    - 保存(done)
    - 移动
    - 放大
    - 缩小标尺
    - 路径
    - 删除
    - 下载(done)
    - 地图属性

menu地图绘制操作区域
  - 基础数据(1d)
    - 容器类型
    - 运力组
    - 设备

  - 导航规划(2d)
    - 绘制(done)
    - 点选择工具
    - 路径选择工具
    - 路径编辑工具
      - 直连
      - 双向路
      - 限速带

  - 控件规划(3d)
    - 普通选择
    - 存储点
    - 停车点
    - 等待点
    - 调整点
    - 充电点
    - 休息点
    - 传送点
    - 规则触发点
    - 禁行点
    - 机械臂点
    - 容器点
    - 提升机点

  - 业务规划(3d)
    - 存储区
    - 固定容器
    - 容器集合
    - 作业位
    - 作业位组
    - 人工工作站
    - 机械臂工作站
    - 智能库区
    - 充电区
    - 队列区
    - 等待区
    - 休息区
    - 传送位
    - 传送区
    - 传送区组
    - 调度段
    - 地理围栏
    - 禁行区
    - 自定义

左侧区域(0.5d)
  - 楼层添加操作(done)
  - 楼层列表操作
  - 删除楼层

右侧区域
  - 收起右侧面板
  - 属性区域(1d)
    - 选中导航图属性
    - 选中点属性
    - 选中路属性

  - 页面控制区域(2d)
    控件筛选
    控件列表
    属性--控件属性
      基础属性
      停车点属性
      容器或机械臂属性

  - 业务组合区域(3d)
    区域类型筛选
    区域列表
    关系
      - ID
      - 类型
      - 名称
      - 容器
      - 设置
      - 超量等待
      - 借助设备传送
      - 规则
      - 设备
      - 自定义
      - 标准调度规则
      - 数量
      - 容器类型
      - 关联操作
      - 属性
      - 子关联状态
      - 等待区优先级
      - 等待区分离等待
      - 队列区优先级
      - 队列区分离等待
      - 调整点
      - 桥
      - 智能库区
      - 作业类型
      - 人工工作站
      - 机械臂工作站
      - 机械臂点
      - 机械臂工作位点、作业位组
      - 等待区
      - 工作站组
      - 作业为组
      - 休息区
      - 传送位
      - 传送区
      - 传送等待区
      - 传送队列区
      - 传送触发规则点
      - 提升机
      - 地理围栏
      - 交通信号灯
      - 调度段
      - 胡同
      - 禁行区
      - 
  关联操作
  容器集合

中间map区域(1d)
  - agv地图渲染
  - 设置地图框架
  - 地图数据保存

```

#### UI 界面操作 (DOM 侧)

- 控件操作, 触发指令, 通过地图开放接口来对处理地图数据变化和展示

#### 地图展示 (wasm 层: canvas + dom 操作)

dom 操作, 节点计算部分用 go 来实现

- 节点数据状态存储
- 暴露操作数据

# webgl 版 编辑器
